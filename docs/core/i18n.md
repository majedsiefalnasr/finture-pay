# Internationalization (i18n) Integration

This project uses [@nuxtjs/i18n](https://i18n.nuxtjs.org/) for internationalization support, enabling multi-language functionality with seamless locale switching. The i18n system is integrated with [Ultimate Core UI](https://github.com/ultimate-eg/ultimate-core-ui) to provide localized UI components and messages.

## Configuration

### Nuxt Config

The i18n module is configured in `nuxt.config.ts`:

```typescript
i18n: {
  bundle: {
    optimizeTranslationDirective: false,
  },
  defaultLocale: 'en',
  locales: [
    {
      code: 'en',
      iso: 'en-US',
      language: 'en',
      name: 'English',
      file: 'en.json',
      dir: 'ltr',
    },
    {
      code: 'ar',
      iso: 'ar-EG',
      language: 'ar',
      name: 'العربية',
      file: 'ar.json',
      dir: 'rtl',
    },
  ],
  lazy: true,
  langDir: 'locales',
  strategy: 'prefix_except_default',
  vueI18n: 'i18n.config.ts',
  detectBrowserLanguage: false,
},
```

### Ultimate Core UI Integration

Ultimate Core UI is configured with i18n support in `app/plugins/ultimate-core-ui.ts`. This provides localized messages for UI components (buttons, dialogs, form elements, etc.):

```typescript
import { createUltimateCoreUI } from 'ultimate-core-ui'
import { createI18n, useI18n } from 'vue-i18n'
import { ar, en } from 'vuetify/locale'
import { createVueI18nAdapter } from 'vuetify/locale/adapters/vue-i18n'

const messages = {
  en: {
    $vuetify: {
      ...en,
    },
  },
  ar: {
    $vuetify: {
      ...ar,
    },
  },
}

const i18n = createI18n({
  legacy: false,
  locale: 'en',
  fallbackLocale: 'en',
  messages,
})

export default defineNuxtPlugin((nuxtApp) => {
  const ultimateCoreUI = createUltimateCoreUI({
    locale: {
      adapter: createVueI18nAdapter({ i18n, useI18n }),
    },
    theme: {
      defaultTheme: 'light',
    },
  })

  nuxtApp.vueApp.use(ultimateCoreUI)
})
```

This setup ensures that Ultimate Core UI components automatically display in the correct language based on the current locale.

### Key Settings

- **Default Locale**: English (`en`)
- **Supported Locales**: English and Arabic
- **Strategy**: `prefix_except_default` - URLs are prefixed for non-default locales (e.g., `/ar/page` for Arabic, `/page` for English)
- **Direction**: Left-to-right (LTR) for English, right-to-left (RTL) for Arabic
- **Lazy Loading**: Translation files are loaded on demand

## File Structure

```text
i18n/
  i18n.config.ts    # Vue I18n configuration
  locales/
    en.json         # English translations
    ar.json         # Arabic translations
app/
  plugins/
    ultimate-core-ui.ts  # Ultimate Core UI with i18n adapter
```

## Usage in Components

### Basic Translation

```vue
<script setup lang="ts">
const { t } = useI18n()
</script>

<template>
  <h1>{{ t('welcome') }}</h1>
  <p>{{ t('about') }}</p>
</template>
```

### Locale Switching

```vue
<script setup lang="ts">
const { locale, locales, setLocale } = useI18n()

const switchLocale = (newLocale: string) => {
  setLocale(newLocale)
}
</script>

<template>
  <select :value="locale" @change="switchLocale($event.target.value)">
    <option v-for="loc in locales" :key="loc.code" :value="loc.code">
      {{ loc.name }}
    </option>
  </select>
</template>
```

### Nested Translations

```vue
<script setup lang="ts">
const { t } = useI18n()
</script>

<template>
  <h2>{{ t('homePage.title') }}</h2>
  <button>{{ t('homePage.button') }}</button>
</template>
```

### Ultimate Core UI Components with i18n

Ultimate Core UI components automatically inherit the current locale:

```vue
<template>
  <u-container>
    <u-btn color="primary">{{ t('submit') }}</u-btn>
    <!-- Button text will be translated, and any built-in UI messages will be in the correct language -->
  </u-container>
</template>
```

## Translation Files

### English (`en.json`)

### Arabic (`ar.json`)

## Components

### LanguageSwitcher Component

A reusable component for locale switching is available at `app/components/LanguageSwitcher.vue`. It provides a dropdown to select the current language.

## Testing

Visit `/test` to see the internationalization functionality in action. The test page demonstrates:

- Basic translations
- Nested object translations
- Locale switching
- Current locale display
- Ultimate Core UI component localization

## Adding New Languages

1. Add the new locale to `nuxt.config.ts` in the `locales` array
2. Create a new JSON file in `i18n/locales/` with the same structure as existing files
3. Translate all keys to the new language
4. Update the `availableLocales` in `i18n.config.ts` if needed
5. Add corresponding locale messages to `app/plugins/ultimate-core-ui.ts` for Ultimate Core UI components

## Best Practices

- Use descriptive keys that reflect the content's purpose
- Organize translations in nested objects for better structure
- Keep translation files synchronized across all locales
- Test RTL layouts when adding RTL languages
- Use the `t()` function consistently throughout components
- Ensure Ultimate Core UI locale messages are updated when adding new languages

## Troubleshooting

- Ensure all translation keys exist in all locale files
- Check console for missing translation warnings
- Verify locale files are properly formatted JSON
- Test URL routing with different locales
- Confirm Ultimate Core UI plugin is properly configured with locale adapter
